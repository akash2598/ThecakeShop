{"ast":null,"code":"import _slicedToArray from\"/Users/webwerks1/Documents/Project/React Js Training/demo_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import axios from\"axios\";import{Link,withRouter}from\"react-router-dom\";import{connect}from\"react-redux\";//useEffec-for did mount didupdate\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(props){useEffect(function(){//alert(\"mounted and updated\")\n},{});var _useState=useState(),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),users=_useState4[0],setUser=_useState4[1];var user={};var getEmail=function getEmail(event){user.email=event.target.value;/*setUser({\n            email:event.target.value,\n            password:users.password\n        }) */};var getPassword=function getPassword(event){user.password=event.target.value;/*  setUser({\n            email:users.email,\n            password:event.target.value\n        }) */};function login(){if(!user.email||!user.password){console.log(user.email);setError(\"Please fill all details\");//call the method\n//  props.informlogin(\"AS\")\n}else{var apiurl=\"https://apibyashu.herokuapp.com/api/login\";axios({url:apiurl,method:\"post\",data:user}).then(function(response){console.log(\"response from api\",response.data);if(response.data.token){//route using code -rote add extra feat. to props of component\nprops.history.push(\"/\");//localStorage.email=response.data.email\nlocalStorage.token=response.data.token;//localStorage.name=response.data.name\n// props.informlogin(localStorage.name)\nconsole.log(\"...previous path\",props.url);props.dispatch({type:\"LOGIN\",payload:{email:response.data.email,name:response.data.name}});}else{alert(\"invalid \");}//props.informlogin(response.data.name)\n},function(error){console.log(\"Error from api\",error);setError(error);});}}return/*#__PURE__*/_jsx(\"div\",{style:{width:\"50%\",margin:\"auto\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",placeholder:\"Enter Email\",onChange:getEmail}),/*#__PURE__*/_jsx(\"br\",{}),users.email,/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{class:\"form-control\",placeholder:\"Enter Password\",onChange:getPassword}),/*#__PURE__*/_jsx(\"br\",{}),users.password,/*#__PURE__*/_jsx(\"button\",{onClick:login,className:\"btn btn-primary\",children:\"Login\"}),/*#__PURE__*/_jsx(\"div\",{style:{float:\"left\"},children:/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\" Not a user?\"})}),/*#__PURE__*/_jsx(\"div\",{style:{float:\"right\"},children:/*#__PURE__*/_jsx(Link,{to:\"/forgotpassword\",children:\" Forgot Password ?\"})}),/*#__PURE__*/_jsx(\"div\",{style:{color:\"red\"},children:error})]})});}Login=withRouter(Login);export default connect(function(state,props){console.log(\".....state\",state);return{url:state&&state[\"url\"]};})(Login);//","map":{"version":3,"sources":["/Users/webwerks1/Documents/Project/React Js Training/demo_react/src/Login.js"],"names":["useState","useEffect","axios","Link","withRouter","connect","Login","props","error","setError","users","setUser","user","getEmail","event","email","target","value","getPassword","password","login","console","log","apiurl","url","method","data","then","response","token","history","push","localStorage","dispatch","type","payload","name","alert","width","margin","float","color","state"],"mappings":"sLAEA,OAAQA,QAAR,CAAiBC,SAAjB,KAAiC,OAAjC,CAEA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,IAAT,CAAeC,UAAf,KAAgC,kBAAhC,CACA,OAASC,OAAT,KAAwB,aAAxB,CAGA;wFACA,QAASC,CAAAA,KAAT,CAAeC,KAAf,CAAqB,CAEfN,SAAS,CAAC,UAAI,CACV;AACH,CAFQ,CAEP,EAFO,CAAT,CAFe,cAMMD,QAAQ,EANd,wCAMVQ,KANU,eAMJC,QANI,8BAOIT,QAAQ,CAAC,EAAD,CAPZ,yCAOXU,KAPW,eAOLC,OAPK,eAQf,GAAIC,CAAAA,IAAI,CAAC,EAAT,CAED,GAAIC,CAAAA,QAAQ,CAAC,QAATA,CAAAA,QAAS,CAASC,KAAT,CAAe,CAEzBF,IAAI,CAACG,KAAL,CAAaD,KAAK,CAACE,MAAN,CAAaC,KAA1B,CACA;AACR;AACA;AACA,aACM,CAPD,CASA,GAAIC,CAAAA,WAAW,CAAC,QAAZA,CAAAA,WAAY,CAASJ,KAAT,CAAe,CAE5BF,IAAI,CAACO,QAAL,CAAgBL,KAAK,CAACE,MAAN,CAAaC,KAA7B,CACF;AACN;AACA;AACA,aACM,CAPD,CAaD,QAASG,CAAAA,KAAT,EAAiB,CACT,GAAG,CAACR,IAAI,CAACG,KAAN,EAAe,CAACH,IAAI,CAACO,QAAxB,CAAiC,CAC7BE,OAAO,CAACC,GAAR,CAAYV,IAAI,CAACG,KAAjB,EACAN,QAAQ,CAAC,yBAAD,CAAR,CAEA;AACF;AAED,CAPD,IASA,CAEI,GAAIc,CAAAA,MAAM,CAAC,2CAAX,CACJrB,KAAK,CAAC,CACFsB,GAAG,CAACD,MADF,CAEFE,MAAM,CAAC,MAFL,CAGFC,IAAI,CAACd,IAHH,CAAD,CAAL,CAKGe,IALH,CAKQ,SAACC,QAAD,CAAY,CAChBP,OAAO,CAACC,GAAR,CAAY,mBAAZ,CAAgCM,QAAQ,CAACF,IAAzC,EAEA,GAAGE,QAAQ,CAACF,IAAT,CAAcG,KAAjB,CAAuB,CAEnB;AACAtB,KAAK,CAACuB,OAAN,CAAcC,IAAd,CAAmB,GAAnB,EACA;AACAC,YAAY,CAACH,KAAb,CAAmBD,QAAQ,CAACF,IAAT,CAAcG,KAAjC,CACA;AACD;AACAR,OAAO,CAACC,GAAR,CAAY,kBAAZ,CAA+Bf,KAAK,CAACiB,GAArC,EACCjB,KAAK,CAAC0B,QAAN,CAAe,CACXC,IAAI,CAAC,OADM,CAEXC,OAAO,CAAC,CAACpB,KAAK,CAACa,QAAQ,CAACF,IAAT,CAAcX,KAArB,CAA2BqB,IAAI,CAACR,QAAQ,CAACF,IAAT,CAAcU,IAA9C,CAFG,CAAf,EAIH,CAbD,IAcI,CACAC,KAAK,CAAC,UAAD,CAAL,CACH,CAEF;AACF,CA3BD,CA2BE,SAAC7B,KAAD,CAAS,CACPa,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAA6Bd,KAA7B,EACAC,QAAQ,CAACD,KAAD,CAAR,CACH,CA9BD,EAgCC,CACP,CAEF,mBACI,YAAK,KAAK,CAAE,CAAC8B,KAAK,CAAC,KAAP,CAAcC,MAAM,CAAC,MAArB,CAAZ,uBAGA,aAAK,SAAS,CAAC,YAAf,wBAEA,gCAFA,cAEqB,aAFrB,cAGA,cAAO,KAAK,CAAC,cAAb,CAA4B,WAAW,CAAC,aAAxC,CAAsD,QAAQ,CAAE1B,QAAhE,EAHA,cAGkF,aAHlF,CAICH,KAAK,CAACK,KAJP,cAKA,mCALA,cAKuB,aALvB,cAMA,cAAO,KAAK,CAAC,cAAb,CAA4B,WAAW,CAAC,gBAAxC,CAAyD,QAAQ,CAAEG,WAAnE,EANA,cAMwF,aANxF,CAOCR,KAAK,CAACS,QAPP,cAQD,eAAQ,OAAO,CAAEC,KAAjB,CAAwB,SAAS,CAAC,iBAAlC,mBARC,cASD,YAAK,KAAK,CAAE,CAACoB,KAAK,CAAC,MAAP,CAAZ,uBACA,KAAC,IAAD,EAAM,EAAE,CAAC,SAAT,0BADA,EATC,cAYD,YAAK,KAAK,CAAE,CAACA,KAAK,CAAC,OAAP,CAAZ,uBACA,KAAC,IAAD,EAAM,EAAE,CAAC,iBAAT,gCADA,EAZC,cAgBA,YAAK,KAAK,CAAE,CAACC,KAAK,CAAC,KAAP,CAAZ,UACKjC,KADL,EAhBA,GAHA,EADJ,CA2BH,CAEDF,KAAK,CAACF,UAAU,CAACE,KAAD,CAAhB,CACA,cAAeD,CAAAA,OAAO,CAAC,SAASqC,KAAT,CAAenC,KAAf,CAAqB,CACxCc,OAAO,CAACC,GAAR,CAAY,YAAZ,CAAyBoB,KAAzB,EACA,MAAM,CAEJlB,GAAG,CAAEkB,KAAK,EAAIA,KAAK,CAAC,KAAD,CAFf,CAAN,CAID,CANmB,CAAP,CAMVpC,KANU,CAAf,CAOA","sourcesContent":["\n  \nimport {useState,useEffect} from \"react\"\n\nimport axios from \"axios\"\nimport { Link ,withRouter} from \"react-router-dom\"\nimport { connect } from \"react-redux\"\n\n\n//useEffec-for did mount didupdate\nfunction Login(props){\n    \n      useEffect(()=>{\n          //alert(\"mounted and updated\")\n      },{})\n    \n      var [error,setError]=useState() \n      var[users,setUser]=useState({})\n      var user={} \n\n     let getEmail=function(event){\n       \n        user.email = event.target.value\n        /*setUser({\n            email:event.target.value,\n            password:users.password\n        }) */\n     }\n\n     let getPassword=function(event){\n      \n        user.password = event.target.value\n      /*  setUser({\n            email:users.email,\n            password:event.target.value\n        }) */\n     }\n\n     \n\n\n\n    function login (){\n            if(!user.email || !user.password){\n                console.log(user.email)\n                setError(\"Please fill all details\")\n               \n                //call the method\n              //  props.informlogin(\"AS\")\n                  \n            }\n            else\n            {\n                \n                let apiurl=\"https://apibyashu.herokuapp.com/api/login\"\n            axios({\n                url:apiurl,\n                method:\"post\",\n                data:user\n\n            }).then((response)=>{\n                console.log(\"response from api\",response.data)\n               \n                if(response.data.token){\n                   \n                    //route using code -rote add extra feat. to props of component\n                    props.history.push(\"/\")\n                    //localStorage.email=response.data.email\n                    localStorage.token=response.data.token\n                    //localStorage.name=response.data.name\n                   // props.informlogin(localStorage.name)\n                   console.log(\"...previous path\",props.url)\n                    props.dispatch({\n                        type:\"LOGIN\",\n                        payload:{email:response.data.email,name:response.data.name}\n                    }) \n                }\n                else{\n                    alert(\"invalid \")\n                }\n\n               //props.informlogin(response.data.name)\n            },(error)=>{\n                console.log(\"Error from api\",error)\n                setError(error)\n            })\n\n            }\n     }\n\n    return(\n        <div style={{width:\"50%\" ,margin:\"auto\"}}>\n                \n                \n        <div className=\"form-group\">\n           \n        <label >Email</label><br/>\n        <input class=\"form-control\" placeholder=\"Enter Email\" onChange={getEmail}></input><br/>\n        {users.email}\n        <label>Password</label><br/>\n        <input class=\"form-control\" placeholder=\"Enter Password\" onChange={getPassword}></input><br/>\n        {users.password}\n       <button onClick={login} className=\"btn btn-primary\">Login</button>\n       <div style={{float:\"left\"}}>\n       <Link to=\"/signup\"> Not a user?</Link>\n       </div>\n       <div style={{float:\"right\"}}>\n       <Link to=\"/forgotpassword\"> Forgot Password ?</Link>\n       </div>\n        \n        <div style={{color:\"red\"}}>\n            {error}\n        </div>\n        </div>\n\n    </div>\n    )\n}\n\nLogin=withRouter(Login)\nexport default connect(function(state,props){\n    console.log(\".....state\",state)\n    return{\n      \n      url :state && state[\"url\"]\n    }\n  })(Login);\n//\n"]},"metadata":{},"sourceType":"module"}