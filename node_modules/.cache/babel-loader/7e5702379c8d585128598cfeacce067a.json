{"ast":null,"code":"var _jsxFileName = \"/Users/webwerks1/Documents/Project/React Js Training/demo_react/src/Login.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport validator from 'validator';\nimport axios from \"axios\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\"; //useEffec-for did mount didupdate\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login(props) {\n  _s();\n\n  var form = document.getElementById(\"loginforms\");\n  var [formerror, setFormerrors] = useState();\n  var [users, setUser] = useState({});\n  var user = {};\n\n  let getEmail = function (event) {\n    if (!event.target.value) setFormerrors(\"Please Enter Email address\");else {\n      user.email = event.target.value;\n      setFormerrors();\n    }\n    /*setUser({\n        email:event.target.value,\n        password:users.password\n    }) */\n  };\n\n  let getPassword = function (event) {\n    if (!event.target.value) setFormerrors(\"Please Enter Password\");else {\n      user.password = event.target.value;\n      setFormerrors();\n    }\n    /*  setUser({\n          email:users.email,\n          password:event.target.value\n      }) */\n  };\n\n  function login() {\n    if (!user.email || !user.password) {\n      console.log(user.email);\n\n      if (!user.email) {\n        setFormerrors(\"Please Enter Email\");\n      } else if (!user.password) {\n        setFormerrors(\"Please Enter Password\");\n      } //call the method\n      //  props.informlogin(\"AS\")\n\n    } else {\n      if (!validator.isEmail(user.email)) {\n        setFormerrors(\"Invalid Email\");\n      } else {\n        let apiurl = \"https://apibyashu.herokuapp.com/api/login\";\n        axios({\n          url: apiurl,\n          method: \"post\",\n          data: user\n        }).then(response => {\n          console.log(\"response from api\", response.data);\n\n          if (response.data.token) {\n            //route using code -rote add extra feat. to props of component\n            props.history.push(\"/\"); //localStorage.email=response.data.email\n\n            localStorage.token = response.data.token; //localStorage.name=response.data.name\n            // props.informlogin(localStorage.name)\n\n            console.log(\"...previous path\", props.url);\n            props.dispatch({\n              type: \"LOGIN\",\n              payload: {\n                email: response.data.email,\n                name: response.data.name\n              }\n            });\n          } else {\n            setFormerrors(response.data.message);\n          } //props.informlogin(response.data.name)\n\n        }, error => {\n          console.log(\"Error from api\", error);\n          setFormerrors(error);\n        });\n      }\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: \"50%\",\n      margin: \"auto\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      id: \"loginform\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 30\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          class: \"form-control\",\n          name: \"email\",\n          type: \"email\",\n          placeholder: \"Enter Email\",\n          onChange: getEmail\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 117\n        }, this), users.email, /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 32\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          class: \"form-control\",\n          name: \"password\",\n          type: \"password\",\n          placeholder: \"Enter Password\",\n          onChange: getPassword\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 129\n        }, this), users.password, /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: login,\n          className: \"btn btn-primary\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            float: \"left\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/signup\",\n            children: \" Not a user?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            float: \"right\"\n          },\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/forgotpassword\",\n            children: \" Forgot Password ?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 8\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            color: \"red\"\n          },\n          children: formerror\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 10\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Login, \"vKPsbXfCTquFc7aMEhlnTuJvldU=\");\n\n_c = Login;\nLogin = withRouter(Login);\nexport default connect(function (state, props) {\n  console.log(\".....state\", state);\n  return {\n    url: state && state[\"url\"]\n  };\n})(Login);\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/webwerks1/Documents/Project/React Js Training/demo_react/src/Login.js"],"names":["useState","useEffect","validator","axios","Link","withRouter","connect","Login","props","form","document","getElementById","formerror","setFormerrors","users","setUser","user","getEmail","event","target","value","email","getPassword","password","login","console","log","isEmail","apiurl","url","method","data","then","response","token","history","push","localStorage","dispatch","type","payload","name","message","error","width","margin","float","color","state"],"mappings":"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","sourcesContent":["\n  \nimport {useState,useEffect} from \"react\"\nimport validator from 'validator'\nimport axios from \"axios\"\nimport { Link ,withRouter} from \"react-router-dom\"\nimport { connect } from \"react-redux\"\n\n\n//useEffec-for did mount didupdate\nfunction Login(props){\n    var form =document.getElementById(\"loginforms\")\n    \n    var [formerror,setFormerrors]=useState()\n    \n      \n      var[users,setUser]=useState({})\n      var user={} \n\n     let getEmail=function(event){\n       if(!event.target.value)\n       setFormerrors(\"Please Enter Email address\")\n       else\n        {\n            user.email = event.target.value\n            setFormerrors()\n        }\n        \n      \n       \n        \n        /*setUser({\n            email:event.target.value,\n            password:users.password\n        }) */\n         \n     }\n\n     let getPassword=function(event){\n      if(!event.target.value)\n      setFormerrors(\"Please Enter Password\")\n      else{\n        user.password = event.target.value\n        setFormerrors()\n      }\n     \n      \n      /*  setUser({\n            email:users.email,\n            password:event.target.value\n        }) */\n     }\n\n     \n\n\n\n    function login (){\n            if(!user.email || !user.password){\n                console.log(user.email)\n                if(!user.email ){\n                setFormerrors(\"Please Enter Email\")\n                \n                }\n                else if(!user.password){\n                setFormerrors(\"Please Enter Password\")\n                \n                }\n                //call the method\n              //  props.informlogin(\"AS\")\n                  \n            }\n            else\n            {\n               \n                if(!validator.isEmail(user.email)){\n                    setFormerrors(\"Invalid Email\")\n                    \n                }\n                else{\n                \n                let apiurl=\"https://apibyashu.herokuapp.com/api/login\"\n            axios({\n                url:apiurl,\n                method:\"post\",\n                data:user\n\n            }).then((response)=>{\n                console.log(\"response from api\",response.data)\n               \n                if(response.data.token){\n                   \n                    //route using code -rote add extra feat. to props of component\n                    props.history.push(\"/\")\n                    //localStorage.email=response.data.email\n                    localStorage.token=response.data.token\n                    //localStorage.name=response.data.name\n                   // props.informlogin(localStorage.name)\n                   console.log(\"...previous path\",props.url)\n                    props.dispatch({\n                        type:\"LOGIN\",\n                        payload:{email:response.data.email,name:response.data.name}\n                    }) \n                }\n                else{\n                    setFormerrors(response.data.message)\n                }\n\n               //props.informlogin(response.data.name)\n            },(error)=>{\n                console.log(\"Error from api\",error)\n                setFormerrors(error)\n            })\n\n        }\n        \n          }\n    \n        }\n\n    return(\n        <div style={{width:\"50%\" ,margin:\"auto\"}}>\n                \n         <form id=\"loginform\">       \n        <div className=\"form-group\">\n           \n        <label >Email</label><br/>\n        <input class=\"form-control\" name=\"email\" type=\"email\" placeholder=\"Enter Email\" onChange={getEmail}></input><br/>\n        {users.email}\n        <label>Password</label><br/>\n        <input class=\"form-control\" name=\"password\" type=\"password\" placeholder=\"Enter Password\" onChange={getPassword}></input><br/>\n        {users.password}\n       <button onClick={login} className=\"btn btn-primary\">Login</button>\n       <div style={{float:\"left\"}}>\n       <Link to=\"/signup\"> Not a user?</Link>\n       </div>\n       <div style={{float:\"right\"}}>\n       <Link to=\"/forgotpassword\"> Forgot Password ?</Link>\n       </div>\n        \n        <div style={{color:\"red\"}}>\n            {formerror}\n        </div>\n        </div>\n        </form>\n\n    </div>\n    )\n}\n\nLogin=withRouter(Login)\nexport default connect(function(state,props){\n    console.log(\".....state\",state)\n    return{\n      \n      url :state && state[\"url\"]\n    }\n  })(Login)\n\n"]},"metadata":{},"sourceType":"module"}